---
import MainLayout from '@layouts/MainLayout.astro';
import type { Project } from '../api/projects';

// Get dynamic slug from URL
export async function getStaticPaths() {
  // In production, fetch from API. For build, use mock data.
  const projects: Project[] = [
    {
    id: 1,
    title: 'Sistem Pendukung keputusan Pemilihan Tempat PKL',
    slug: 'sistem-pendukung-keputusan-pemilihan-tempat-pkl',
    description: 'Full-stack .',
    longDescription: ' Sistem Pendukung Keputusan Pemilihan Tempak PKL Menggunakan Metode AHP dan Borda',
    image: '/images/projects/SPK PKL.png',
    tags: ['PHP','Bootstrap','MySQL'],
    date: '2025-01-01',
    github: 'https://github.com/denjiwantcoding/Project_PemilihanTempatPKL_AHP_BORDA',
    featured: true
    },
    {
      id: 2,
      title: 'Aplikasi Resep Makanan',
      slug: 'aplikasi-resep-makanan',
      description: 'Aplikasi mobile untuk mencari dan menyimpan resep makanan favorit dengan pilihan kategori yang beragam. ',
      longDescription: 'Aplikasi mobile yang user frendly untuk mencari, menyimpan, dan berbagi resep makanan. Fitur pencarian berdasarkan bahan, kategori, dan nama makanan. Integrasi dengan API resep populer untuk update resep terbaru.',
      image: '/images/projects/resepMakanan.png',
      tags: ['Flutter', 'Dart', 'Firebase'],
      date: '2024-12-15',
      github: 'https://github.com/denjiwantcoding/aplikasi_resep_API',
      featured: true
    },
    {
      id: 3,
      title: 'SIAK Sekolah',
      slug: 'siak-sekolah',
      description: 'Sistem Informasi Akademi Sekolah Multi Login Menggunakan Flutter.',
      longDescription: 'Aplikasi dibuat dengan framework Flutter Multi login sebagai guru, admin, dan siswa. guru bisa mengelola nilai siswa, admin mengelola data sekolah, dan siswa bisa melihat nilai serta jadwal pelajaran.sementara data disimpan di firebase.',
      image: '/images/projects/siak-sekolah.jpeg',
      tags: ['Flutter', 'Dart', 'Firebase'],
      date: '2024-11-20',
      github: 'https://github.com/username/portfolio-cms',
      featured: true
    },
    {
      id: 4,
    title: 'DenjiAgent',
    slug: 'ai-chatbot-assistant',
    description: 'Integrasi n8n menggunakan API dari deepseek.',
    longDescription: 'Chatbot pintar yang dapat memahami pertanyaan pelanggan dalam bahasa natural, memberikan jawaban relevan, dan melakukan escalation ke human agent jika diperlukan.',
    image: '/images/projects/ChatBot.jpeg',
    tags: ['n8n', 'Deepseek API', 'Docker', 'telegram Bot'],
    date: '2024-10-10',
    github: 'https://telegram.com/DenjiAgent',
    featured: true
    },
    {
      id: 5,
      title: 'Task Management Tool',
      slug: 'task-management-tool',
      description: 'Aplikasi manajemen tugas dengan kolaborasi tim dan Kanban board.',
      longDescription: 'Tool manajemen proyek dengan fitur Kanban board, Gantt chart, time tracking, team collaboration, file sharing, dan integrasi dengan tools populer seperti Slack dan Google Drive.',
      image: '/images/projects/task-manager.jpg',
      tags: ['Vue.js', 'Laravel', 'MySQL', 'Redis', 'Socket.io'],
      date: '2024-09-05',
      github: 'https://github.com/username/task-manager',
      demo: 'https://task-manager-demo.com',
      featured: false
    },
    {
      id: 6,
      title: 'Weather Forecast App',
      slug: 'weather-forecast-app',
      description: 'Aplikasi prakiraan cuaca dengan visualisasi data interaktif.',
      longDescription: 'Aplikasi cuaca dengan data real-time dari multiple weather APIs, visualisasi grafik interaktif, notifikasi cuaca ekstrem, dan forecast 7 hari ke depan.',
      image: '/images/projects/weather-app.jpg',
      tags: ['Svelte', 'D3.js', 'OpenWeather API', 'Vercel'],
      date: '2024-08-15',
      github: 'https://github.com/username/weather-app',
      demo: 'https://weather-app-demo.vercel.app',
      featured: false
    },
    {
    id: 7,
    title: 'Blogku',
    slug: 'website-pengelola-artikel-berita',
    description: 'Website ini untuk Pengelola artikel multi login untuk admin dan tamu.',
    longDescription: 'Website pengelola artikel berita dengan fitur multi login untuk admin dan tamu. Admin dapat menambah, mengedit, dan menghapus artikel, sedangkan tamu dapat membaca artikel yang tersedia.',
    image: '/images/projects/Blogku.png',
    tags: ['HTML', 'CSS','Bootstrap', 'PHP', 'MySQL'],
    date: '2024-12-25',
    github: 'https://github.com/denjiwantcoding/PengelolaArtikel',
    featured: false
  }

  ];

  return projects.map((project) => ({
    params: { slug: project.slug },
    props: { project }
  }));
}

interface Props {
  project: Project;
}

const { project } = Astro.props;
---

<MainLayout
  title={project.title}
  description={project.description}
>
  <article class="section pt-32">
    <div class="container max-w-4xl">
      <!-- Back Button -->
      <a
        href="/projects"
        class="inline-flex items-center gap-2 text-gray-600 hover:text-primary-600 mb-8 transition-colors"
      >
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
        Back to Projects
      </a>

      <!-- Project Header -->
      <header class="mb-8">
        <div class="flex flex-wrap items-center gap-4 text-sm text-gray-600 mb-4">
          <time datetime={project.date}>
            {new Date(project.date).toLocaleDateString('id-ID', {
              year: 'numeric',
              month: 'long',
              day: 'numeric'
            })}
          </time>
          <span>•</span>
          <span>{project.tags.length} Technologies</span>
        </div>

        <h1 class="mb-4">{project.title}</h1>
        <p class="text-xl text-gray-600">{project.description}</p>
      </header>

      <!-- Project Image -->
      {project.image && (
        <div class="mb-8 rounded-xl overflow-hidden shadow-xl">
          <img
            src={project.image}
            alt={project.title}
            class="w-full h-auto object-cover"
          />
        </div>
      )}

      <!-- Project Links -->
      <div class="flex flex-wrap gap-4 mb-8">
        {project.demo && (
          <a
            href={project.demo}
            target="_blank"
            rel="noopener noreferrer"
            class="btn btn-primary"
          >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
            </svg>
            Live Demo
          </a>
        )}
        {project.github && (
          <a
            href={project.github}
            target="_blank"
            rel="noopener noreferrer"
            class="btn btn-outline"
          >
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
            </svg>
            View Code
          </a>
        )}
      </div>

      <!-- Project Description -->
      <div class="card mb-8">
        <h2 class="text-2xl font-bold mb-4">About This Project</h2>
        <p class="text-gray-600 leading-relaxed">
          {project.longDescription}
        </p>
      </div>

      <!-- Technologies Used -->
      <div class="card">
        <h2 class="text-2xl font-bold mb-4">Technologies Used</h2>
        <div class="flex flex-wrap gap-3">
          {project.tags.map((tag) => (
            <span class="px-4 py-2 bg-primary-50 text-primary-700 rounded-lg font-medium">
              {tag}
            </span>
          ))}
        </div>
      </div>

      <!-- Next/Previous Project Navigation -->
      <nav class="mt-16 pt-8 border-t border-gray-200">
        <div class="flex justify-between items-center">
          <a
            href="/projects"
            class="text-gray-600 hover:text-primary-600 transition-colors"
          >
            ← Back to all projects
          </a>
          <a
            href="/contact"
            class="btn btn-primary"
          >
            Interested? Contact Me
          </a>
        </div>
      </nav>
    </div>
  </article>
</MainLayout>

<style>
  article {
    animation: fade-in 0.6s ease-out;
  }

  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
